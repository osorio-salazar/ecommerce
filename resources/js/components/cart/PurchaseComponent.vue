<template>
    <div class="bg-gray-100 h-screen py-8">
        <div class="container mx-auto px-4">
            <h1 class="text-2xl font-semibold mb-4">Productos en el carrito</h1>
            <div class="flex flex-col md:flex-row gap-4">
                <div class="md:w-3/4">
                    <div class="bg-white rounded-lg shadow-md p-6 mb-4">
                        <table class="w-full">
                            <thead>
                                <tr>
                                    <th class="text-left font-semibold">Productos</th>
                                    <th class="text-left font-semibold">Precio</th>
                                    <th class="text-left font-semibold">Cantidad</th>
                                    <th class="text-left font-semibold">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="product in cart" :key="product.id">
                                    <td class="py-4">
                                        <div class="flex items-center">
                                            <img :src="'/storage/productos/' + product.product_image.split(',')[0].trim()"
                                                class="h-16 w-16 mr-4" />
                                            <span class="font-semibold text-2xl ml-5">{{ product.name }}</span>
                                        </div>
                                    </td>
                                    <td class="py-4">${{ product.price.toFixed(2) }}</td>
                                    <td class="py-4">
                                        <div class="flex items-center">
                                            <p>{{ product.cantidad }}</p>
                                        </div>
                                    </td>
                                    <td class="py-4">${{ (product.price * product.cantidad).toFixed(2) }}</td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="md:w-1/4">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-lg font-semibold mb-4">Summary</h2>
                        <div class="flex justify-between mb-2">
                            <span>Subtotal</span>
                            <span>${{ subtotal }}</span>
                        </div>
                        <div class="flex justify-between mb-2">
                            <span>Taxes</span>
                            <span>$500</span>
                        </div>
                        <div class="flex justify-between mb-2">
                            <span>Shipping</span>
                            <span>$0.00</span>
                        </div>
                        <hr class="my-2">
                        <div class="flex justify-between mb-2">
                            <span class="font-semibold">Total</span>
                            <span class="font-semibold">$21.98</span>
                        </div>
                        <button class="bg-blue-500 text-white py-2 px-4 rounded-lg mt-4 w-full" @click="realizarCompra">Checkout</button>
                        <hr class="my-2">
                        <div>
                            <svg enable-background="new 0 0 1000 1000" viewBox="0 0 1000 1000" class="w-55 h-50 "
                                xmlns="http://www.w3.org/2000/svg">
                                <switch>
                                    <foreignObject height="1"
                                        requiredExtensions="http://ns.adobe.com/AdobeIllustrator/10.0/" width="1" />
                                    <g>
                                        <circle cx="500" cy="500" fill="#382b73" r="398" />
                                        <circle cx="500" cy="500" fill="#473080" r="346" />
                                        <path
                                            d="m789.6 490c-8.9 6.1-19.5 9.4-30.2 10.4-5.5.5-11.1.3-16.4-1.3-4.7-1.4-9.2-3.5-13.3-6.1-8.4-5.3-15.5-12.5-21.7-20.2-.9-1.1-1.8-2.2-2.6-3.3-.8-1-1.5-2.2-2.5-3-1.9-1.5-4.6-1.5-6.5 0-.9.7-1.5 1.6-2.1 2.5-.9 1.2-1.8 2.3-2.7 3.5-1.8 2.2-3.7 4.4-5.7 6.5-6.7 7.1-14.3 13.7-23.2 17.8-4.4 2-9.1 3.4-13.9 3.8-5.5.4-11-.1-16.4-1.2s-10.7-2.8-15.7-5.2c-2.3-1.1-4.5-2.4-6.6-3.8-2.1-1.3-4.5-1.8-6.6-.2-1.9 1.4-2.2 3.5-2.2 5.6v5.3 29.8.7h-10-43.9v-44.1c13.3-5.6 25.6-13.7 36-23.6 10.5-9.9 19.1-21.7 25.5-34.7 1.9-3.9 3.6-8 5.1-12.1.7-2 1.4-4.1 2-6.2.2-.5.3-1.1.5-1.6.1-.2.1-.4.2-.5.2-.6 0-.6.6-.6 1.1 0 2.3.3 3.4.3 6.7 0 13.1-3.5 16.8-9.1 1.9-2.8 3-6 3.4-9.3.2-1.8.1-3.7.1-5.5 0-2 0-4 0-6v-21.4c0-11.2-9.1-20.3-20.3-20.3-.4-2.7-.9-5.4-1.7-8.1-3.2-16.7-10.1-32.6-19.9-46.4-2.9-4.1-5.9-8.2-9.4-11.7-13.9-15.2-31.7-26.8-51.2-33.3-21.6-7.2-45.3-8.1-67.4-2.6-12 3-23.6 7.9-34.2 14.4-11.9 7.3-22.4 16.7-31.1 27.6-8.3 10.4-15 22.3-19.4 34.9-1.4 4.1-2.7 8.2-3.7 12.4-1 4.3-2.1 8.6-2.7 12.9h-.1c-11.2 0-20.3 9.1-20.3 20.3v21.4 9.5c0 10.9 9.3 20.3 20.3 20.3 1.3 0 2.6-.1 3.8-.4 9.8 35.9 35.7 65.1 69.5 79.4v44.1h-43.9-28.6c-14.2 0-28.3 3.2-41.1 9.4-12.2 5.8-23 14.3-31.7 24.7-8.7 10.5-15.2 22.8-18.8 35.9-2 7.4-3.1 15.1-3.3 22.7-.1 2.4 0 4.8 0 7.3v20.1.4 52.5c9.2 10.7 19.1 20.6 29.8 29.8s22.1 17.6 34 25.2c12.1 7.6 24.7 14.3 37.8 20 13.2 5.8 26.9 10.5 40.9 14.2 14.2 3.7 28.7 6.3 43.3 7.8 1.7.2 3.5.5 5.2.5 7.5.6 15.1.9 22.8 1h.1.3.2.3.2.1c7.7 0 15.4-.3 23-1 13.8-1.1 27.5-3.3 41-6.4 13.2-3.1 26.1-7.1 38.7-12 7.2-2.8 14.1-6.1 21-9.3 2.9-1.4 5.7-2.9 8.5-4.4 1.3-.7 2.7-1.5 4-2.2.7-.4 1.3-.7 2-1.1.6-.3 1.5-.7 2-1.2 13.1-7.5 25.6-16.1 37.3-25.6 12.1-9.8 23.3-20.6 33.7-32.2.7-.8 1.4-1.6 2.2-2.5.4-.4.4-.4.5-.9.1-.9 0-1.8 0-2.7 0-1.7 0-3.4 0-5.1l24-12.4c36.2-19.1 59.3-58 59.3-100.6v-88.8c0-3.4-3.1-6.2-6.5-5.5-2 .4-3.8 2.1-5.5 3.3 1.4-1 2.8-1.9 4.2-2.9-.2.1-.4.3-.6.4-6.8 4.7 3.6-2.4 0 0z"
                                            fill="#382b73" />
                                        <path
                                            d="m714.5 614.5v70.1c-1 1.2-2 2.3-3 3.5-8.4 9.4-17.3 18.3-26.9 26.5-.1.1-.2.1-.2.2-10.9 9.3-22.5 17.9-34.8 25.5-2.8 1.8-5.7 3.5-8.7 5.2-5.4 3.1-10.9 6-16.5 8.8-22.9 11.2-47.5 19.4-73.3 24.1-6.5 1.2-13.1 2.2-19.8 2.9-2.6.3-5.1.5-7.7.7-7.6.6-15.2 1-23 1h-1.2c-7.7 0-15.3-.3-22.8-1h-.1c-2.6-.2-5.2-.5-7.7-.7-6.7-.7-13.4-1.7-20-2.9-25.7-4.7-50.3-12.9-73.1-24.1-5.6-2.8-11.2-5.7-16.6-8.8-2.9-1.7-5.8-3.4-8.7-5.2-12.3-7.7-24-16.3-35-25.8-10.7-9.2-20.7-19.2-29.9-29.9v-78.3c0-20.6 6.6-39.7 17.8-55.3 17.2-23.9 45.3-39.5 77-39.5h239.3c4.7 0 9.3.3 13.8 1 26 3.8 48.5 18.1 63.2 38.5 11.2 15.5 17.8 34.6 17.8 55.3z"
                                            fill="#fff335" />
                                        <path
                                            d="m640.9 664.6v80.8c-5.4 3.1-10.9 6.1-16.5 8.8-22.9 11.2-47.5 19.4-73.3 24.1-6.5 1.2-13.1 2.2-19.8 2.9-2.6.3-5.1.5-7.7.7l-17.7.7-5.3.2v.1h-.1-.5-.5-.1v-.1l-5.3-.2-17.5-.7h-.1c-2.6-.2-5.2-.5-7.7-.7-6.7-.7-13.4-1.7-20-2.9-25.7-4.7-50.3-12.9-73.1-24.1-5.6-2.8-11.2-5.7-16.6-8.8v-113.3c10.6-60.2 44.5-97.8 93.7-120.6l47.2 91.5 47.2-91.5c23.3 10.8 43.2 24.9 58.8 43.2-3.2 9.7-4.9 20-4.9 30.8-.1 32.4 15.6 61.2 39.8 79.1z"
                                            fill="#fede3a" />
                                        <path d="m452.8 511.5h-43.9l36.2 135.7 54.9-44.3z" fill="#fff" />
                                        <path d="m547.2 511.5h43.9l-36.2 135.7-54.9-44.3z" fill="#fff" />
                                        <path d="m505.9 602.9v179.8l-5.3.2v.1h-.1l-.5-.1-.5.1h-.1v-.1l-5.3-.2v-179.8z"
                                            fill="#fff" />
                                        <path d="m547.2 511.5-33.8 102.2-13.4-10.8z" fill="#d1d3d4" />
                                        <path d="m452.8 511.5 33.8 102.2 13.4-10.8z" fill="#d1d3d4" />
                                        <path
                                            d="m359.1 632.1v113.4c-2.9-1.7-5.8-3.4-8.7-5.2-12.3-7.7-24-16.3-35-25.8-10.7-9.2-20.7-19.2-29.9-29.9v-52.5z"
                                            fill="#fff" />
                                        <path
                                            d="m714.5 632.1v52.5c-9.2 10.7-19.2 20.7-29.9 29.9-.1.1-.2.1-.2.2-10.9 9.4-22.5 17.9-34.8 25.5-2.8 1.8-5.7 3.5-8.7 5.2v-113.3z"
                                            fill="#fff" />
                                        <path d="m640.9 745.4v-88.7-24.7l-16.5 122.2c5.5-2.7 11.1-5.7 16.5-8.8z"
                                            fill="#e7ad27" />
                                        <path d="m375.7 754.2c-5.6-2.8-11.2-5.7-16.6-8.8v-113.3z" fill="#e7ad27" />
                                        <path
                                            d="m379.6 388.3c-11.2 0-20.3-9.1-20.3-20.3v-30.9c0-11.2 9.1-20.3 20.3-20.3 11.2 0 20.3 9.1 20.3 20.3v30.9c-.1 11.2-9.2 20.3-20.3 20.3z"
                                            fill="#fff" />
                                        <path
                                            d="m379.6 378.7c-11.2 0-20.3-9.1-20.3-20.3v9.5c0 11.2 9.1 20.3 20.3 20.3 11.2 0 20.3-9.1 20.3-20.3v-9.5c-.1 11.3-9.2 20.3-20.3 20.3z"
                                            fill="#d1d3d4" />
                                        <path
                                            d="m620.4 388.3c-11.2 0-20.3-9.1-20.3-20.3v-30.9c0-11.2 9.1-20.3 20.3-20.3 11.2 0 20.3 9.1 20.3 20.3v30.9c0 11.2-9.1 20.3-20.3 20.3z"
                                            fill="#fff" />
                                        <path
                                            d="m620.4 378.7c-11.2 0-20.3-9.1-20.3-20.3v9.5c0 11.2 9.1 20.3 20.3 20.3 11.2 0 20.3-9.1 20.3-20.3v-9.5c0 11.3-9.1 20.3-20.3 20.3z"
                                            fill="#d1d3d4" />
                                        <path d="m452.8 447.4v64.1c23.8 31.1 70.6 31.1 94.4 0v-64.1z" fill="#fff" />
                                        <path d="m452.8 511.5 47.2 91.4 47.2-91.5c-23.8 31.2-70.7 31.2-94.4.1z"
                                            fill="#ef5a9d" />
                                        <path
                                            d="m381.3 308.8c3.9-20.2 12.9-38.5 25.5-53.8 3.6-4.4 7.6-8.6 11.8-12.4 21.5-19.6 50-31.5 81.4-31.5 1.4 0 2.8 0 4.2.1h1.4c31.2 1.4 59.3 14.6 79.9 35.3 18.4 18.4 30.9 42.7 34.4 69.9.7 5.1 1 10.3 1 15.6v24c0 66.8-54.1 120.9-120.9 120.9s-120.9-54.1-120.9-120.9v-24c0-5.1.3-10.2.9-15.2z"
                                            fill="#fff" />
                                        <path
                                            d="m500 457.8c-66.8 0-120.9-54.1-120.9-120.9v19.1c0 66.8 54.1 120.9 120.9 120.9s120.9-54.1 120.9-120.9v-19.1c0 66.8-54.1 120.9-120.9 120.9z"
                                            fill="#d1d3d4" />
                                        <path
                                            d="m381.3 308.8h11.5v58c0 3.8-2.9 7.1-6.7 7.2-3.9.1-7.1-3-7.1-6.9v-41.7c.1-5.7.8-11.3 2.3-16.6z"
                                            fill="#1caee4" />
                                        <path
                                            d="m620.9 324.4v42.4c0 3.5-2.5 6.6-6 7.1-4.2.5-7.8-2.7-7.8-6.8v-58.2h11.6c1.5 4.9 2.2 10.2 2.2 15.5z"
                                            fill="#1caee4" />
                                        <path
                                            d="m504.2 211.2c-12.2 19.1-42.6 60.4-91.7 89.4-11.8 7-22.7 12.3-32.5 16.3 2.9-23.3 12.5-44.6 26.8-61.8 3.6-4.4 7.6-8.6 11.8-12.4 21.5-19.6 50-31.5 81.4-31.5 1.4-.1 2.8-.1 4.2 0z"
                                            fill="#1caee4" />
                                        <path
                                            d="m619.9 316.4c-16.5 5-48.9 9.7-100.4-3.8-52.1-13.6-91.6-40.6-112.7-57.6 3.6-4.4 7.6-8.6 11.8-12.4 21.5-19.6 50-31.5 81.4-31.5 1.9 0 3.7 0 5.6.1 31.2 1.4 59.3 14.6 79.9 35.3 18.4 18.4 30.9 42.8 34.4 69.9z"
                                            fill="#136da0" />
                                        <path
                                            d="m519.5 241.9c-22.8-6-43.2-14.5-60.7-23.6-15 5.4-28.6 13.7-40.2 24.3-4.2 3.9-8.2 8-11.8 12.4 21.1 17 60.6 44 112.7 57.6 51.5 13.5 84 8.8 100.4 3.8-3.2-25.2-14.3-48-30.6-65.8-17.5.8-40.5-1-69.8-8.7z"
                                            fill="#1caee4" />
                                        <path
                                            d="m519.5 265.5c-33.3-8.7-61.5-22.9-83-36.4-6.4 3.9-12.4 8.5-17.9 13.5-4.2 3.9-8.2 8-11.8 12.4 21.1 17 60.6 44 112.7 57.6 51.5 13.5 84 8.8 100.4 3.8-2-15.8-7.1-30.6-14.6-43.9-18.5 3-46.6 3.2-85.8-7z"
                                            fill="#136da0" />
                                        <path
                                            d="m519.5 289.1c-42.7-11.2-77-31.3-99.6-47.6-.4.4-.9.8-1.3 1.2-4.2 3.9-8.2 8-11.8 12.4 21.1 17 60.6 44 112.7 57.6 51.5 13.5 84 8.8 100.4 3.8-1-7.6-2.7-15.1-5.1-22.2-17.6 4.3-48.6 7-95.3-5.2z"
                                            fill="#1caee4" />
                                        <g fill="#136da0">
                                            <path
                                                d="m500 396c-7.4 0-13.4-6-13.4-13.4v-17.6c0-7.4 6-13.4 13.4-13.4 7.4 0 13.4 6 13.4 13.4v17.6c0 7.5-6 13.4-13.4 13.4z" />
                                            <circle cx="443.8" cy="341.3" r="10.2" />
                                            <circle cx="556.2" cy="341.3" r="10.2" />
                                            <path
                                                d="m500 431.8c-13 0-25.3-5.1-34.6-14.3-1.2-1.2-1.2-3.2 0-4.4s3.2-1.2 4.4 0c8.1 8.1 18.8 12.5 30.2 12.5s22.1-4.4 30.2-12.5c1.2-1.2 3.2-1.2 4.4 0s1.2 3.2 0 4.4c-9.3 9.2-21.6 14.3-34.6 14.3z" />
                                        </g>
                                        <path d="m500 768.8-.1.1h.1z" fill="#ef5a9d" />
                                        <path
                                            d="m714.5 614.5v70.1c-1 1.2-2 2.3-3 3.5l-11.9 6.2-39-20.3c-36.5-18.9-59.5-57.9-59.5-100.5v-62h18.6c4.7 0 9.3.3 13.8 1 26 3.8 48.5 18.1 63.2 38.5 11.2 15.5 17.8 34.6 17.8 55.3z"
                                            fill="#e7ad27" />
                                        <path
                                            d="m640.9 632.1v28.7c6 5.1 12.6 9.5 19.7 13.2l38.9 20.2 11.9-6.2c1-1.1 2-2.3 3-3.5v-52.5h-73.5z"
                                            fill="#d1d3d4" />
                                        <path
                                            d="m789.6 470c3.6-2.5 8.4.1 8.4 4.6v88.8c0 42.6-23.1 81.6-59.5 100.5l-38.9 20.2-39-20.1c-36.5-18.9-59.5-57.9-59.5-100.5v-88.8c0-4.5 4.8-7.1 8.4-4.6 9.6 6.6 22.4 10.6 36.6 10.6 22.1 0 41.1-22.1 49.3-33.1 2.1-2.9 6.3-2.9 8.5 0 8.1 11.1 27.1 33.1 49.3 33.1 14-.1 26.8-4.1 36.4-10.7z"
                                            fill="#136da0" />
                                        <path
                                            d="m646 500.6c-8.6 0-17-1.2-24.9-3.5v66.3c0 34.9 19.1 67.4 48.8 82.8l29.7 15.4 29.7-15.4c29.6-15.4 48.8-47.9 48.8-82.8v-66.3c-7.9 2.3-16.4 3.5-24.9 3.5-22.2 0-40.7-13.7-53.5-27.1-13 13.4-31.5 27.1-53.7 27.1z"
                                            fill="#1caee4" />
                                        <path
                                            d="m729.2 640.2-29.7 15.4-29.7-15.4c-29.6-15.4-48.8-47.9-48.8-82.8v6c0 34.9 19.1 67.4 48.8 82.8l29.7 15.4 29.7-15.4c29.6-15.4 48.8-47.9 48.8-82.8v-6c0 35-19.2 67.4-48.8 82.8z"
                                            fill="#009add" />
                                        <path
                                            d="m753 500.6c-22.2 0-40.7-13.7-53.5-27.1-12.8 13.4-31.3 27.1-53.5 27.1-8.6 0-17-1.2-24.9-3.5v6.3c7.9 2.3 16.4 3.5 24.9 3.5 22.2 0 40.7-13.7 53.5-27.1 12.8 13.4 31.3 27.1 53.5 27.1 8.6 0 17-1.2 24.9-3.5v-6.3c-7.8 2.4-16.3 3.5-24.9 3.5z"
                                            fill="#fff" />
                                        <path d="m689.5 613.2-40-40 14.1-14.2 25.9 25.9 54.8-54.7 14.1 14.1z" fill="#fff" />
                                    </g>
                                </switch>
                            </svg>
                            <p class="ml-2 text-purple-600 font-semibold text-lg">100% Compra Seguro</p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</template>
  
<script>
export default {
    data() {
        return {
            cart: [],
        };
    },
    created() {
        this.cart = JSON.parse(localStorage.getItem('cart')) || [];
        console.log('Productos en el carrito:', this.cart);
    },

    computed: {
        subtotal() {
            return this.cart.reduce((total, product) => {
                return total + (product.price * product.cantidad);
            }, 0);
        }
    },


    methods: {
        realizarCompra() {

            if (this.user === undefined) {
                alert('Registrate para poder comprar')
                    this.$router.push('/register');
                
            }else{
                console.log('ESTOY REGISTRADI')
                console.log(this.user)
                
            }
            
        },
        getCartDataBase() {

        },

        userAuth() {
            axios.get('/getAuth')
                .then(response => {
                    this.user = response.data;
                    if (this.user) {

                    }

                })
        },

    },
};
</script>
  
<style scoped>
.purchase-container {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
}

.purchase-title {
    font-size: 24px;
    margin-bottom: 20px;
}

.card {
    display: flex;
    border: 1px solid #ccc;
    border-radius: 8px;
    margin-bottom: 15px;
}

.card-image {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 8px 0 0 8px;
}

.card-info {
    padding: 10px;
}

.purchase-button {
    background-color: #4caf50;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}</style>